(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79d1bd44"],{8628:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("h2",{staticClass:"main-title"},[t._v("Добавить новость")]),i("v-form",{ref:"form",attrs:{"lazy-validation":""}},[i("v-text-field",{attrs:{error:0==t.title.length&&!t.valid,label:"Заголовок",clearable:"","clear-icon":"mdi-close-circle"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),i("vue-editor",{staticClass:"ta",attrs:{error:0==t.text.length&&!t.valid,editorToolbar:t.customToolbar},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),i("v-autocomplete",{attrs:{items:t.categories,outlined:"",dense:"",error:!t.categ&&!t.valid,chips:"","small-chips":"",label:"Категории",required:"",multiple:""},model:{value:t.categ,callback:function(e){t.categ=e},expression:"categ"}}),i("v-text-field",{attrs:{label:"Дата в формате мм.дд.гггг",required:"",type:"date",error:0==t.date.length&&!t.valid},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),i("v-file-input",{ref:"file",attrs:{chips:"",counter:"",multiple:"","show-size":"","truncate-length":"12",label:"Загрузить фотографии",accept:"image/*"},on:{change:t.fileChange},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),i("div",{staticClass:"wrapper-img"}),i("v-btn",{attrs:{block:"",color:"success",depressed:"",elevation:"6",outlined:"",plain:"",raised:"",rounded:"",text:"",tile:""},on:{click:t.validate}},[t._v("Опубликовать")]),i("br"),i("v-btn",{attrs:{block:"",color:"red",depressed:"",elevation:"6",outlined:"","mt-4":"",plain:"",raised:"",rounded:"",text:"",tile:""},on:{click:t.reset}},[t._v("Сбросить")])],1),i("div",{ref:"htmlHelper",staticClass:"htmlHelper",staticStyle:{display:"none"},domProps:{innerHTML:t._s(t.text)}})],1)},l=[],n=(i("ac1f"),i("1276"),i("99af"),i("4e827"),i("d3b7"),i("159b"),i("5873")),o={data:function(){return{date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),title:"",text:"",mainPhoto:0,categ:null,valid:!0,photos:[],filename:null,html:this.text,customToolbar:[[{header:[!1,1,2,3,4,5,6]}],["bold","italic","underline","strike"],[{align:""},{align:"center"},{align:"right"},{align:"justify"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"},{list:"check"}],[{indent:"-1"},{indent:"+1"}],[{color:[]},{background:[]}],["link"],["clean"]]}},components:{VueEditor:n["a"]},methods:{reset:function(){this.date="",this.title="",this.text="",this.categ=null,this.valid=!0,this.$refs.file.value&&this.$refs.file.reset()},validate:function(){if(this.valid=!1,this.date&&this.title&&this.text&&this.categ){var t=this.date.split("-");t="".concat(t[2],".").concat(t[1],".").concat(t[0]),this.$store.commit("ADD_NEWS",{id:Date.now(),title:this.title,text:[this.text,this.$refs.htmlHelper.innerText],category:this.categ.sort(),date:t,photos:this.photos,mainPhoto:this.mainPhoto}),this.$router.push("/")}},fileChange:function(t){var e=this,i=document.querySelector(".wrapper-img");i.innerHTML="";var a=null;t.forEach((function(t){var l=new FileReader;l.readAsDataURL(t),l.onload=function(t){var n=t.target.result;e.photos.push(n),a=document.createElement("img"),a.src=l.result,i.appendChild(a)}})),i.addEventListener("click",(function(t){i.childNodes.forEach((function(t){return t.classList.remove("selected-photo")})),t.path[0].classList.contains("wrapper-img")||t.path[0].classList.add("selected-photo"),i.childNodes.forEach((function(t,i){t.classList.contains("selected-photo")&&(e.mainPhoto=i)}))}))}},computed:{categories:function(){return this.$store.getters.categories}}},s=o,r=(i("cdda"),i("2877")),c=i("6544"),d=i.n(c),u=i("c6a6"),h=i("8336"),p=i("a523"),f=i("23a7"),m=i("4bd4"),v=i("8654"),g=Object(r["a"])(s,a,l,!1,null,null,null);e["default"]=g.exports;d()(g,{VAutocomplete:u["a"],VBtn:h["a"],VContainer:p["a"],VFileInput:f["a"],VForm:m["a"],VTextField:v["a"]})},cdda:function(t,e,i){"use strict";i("f456")},f456:function(t,e,i){}}]);
//# sourceMappingURL=chunk-79d1bd44.ff619e57.js.map