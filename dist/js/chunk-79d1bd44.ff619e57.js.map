{"version":3,"sources":["webpack:///./src/views/AddNews.vue?e9a4","webpack:///src/views/AddNews.vue","webpack:///./src/views/AddNews.vue?9f2c","webpack:///./src/views/AddNews.vue","webpack:///./src/views/AddNews.vue?d7a5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","title","length","valid","model","value","callback","$$v","expression","text","customToolbar","categories","categ","date","on","fileChange","filename","validate","reset","staticStyle","domProps","_s","staticRenderFns","data","toISOString","substr","mainPhoto","photos","html","header","align","list","indent","color","background","components","VueEditor","methods","$refs","file","dateRu","$store","commit","id","category","$router","push","e","wrapper","reader","img","path","classList","contains","el","computed","getters","component","VAutocomplete","VBtn","VContainer","VFileInput","VForm","VTextField"],"mappings":"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","file":"js/chunk-79d1bd44.ff619e57.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('h2',{staticClass:\"main-title\"},[_vm._v(\"Добавить новость\")]),_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"}},[_c('v-text-field',{attrs:{\"error\":_vm.title.length == 0 && !_vm.valid,\"label\":\"Заголовок\",\"clearable\":\"\",\"clear-icon\":\"mdi-close-circle\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}}),_c('vue-editor',{staticClass:\"ta\",attrs:{\"error\":_vm.text.length == 0 && !_vm.valid,\"editorToolbar\":_vm.customToolbar},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}),_c('v-autocomplete',{attrs:{\"items\":_vm.categories,\"outlined\":\"\",\"dense\":\"\",\"error\":!_vm.categ && !_vm.valid,\"chips\":\"\",\"small-chips\":\"\",\"label\":\"Категории\",\"required\":\"\",\"multiple\":\"\"},model:{value:(_vm.categ),callback:function ($$v) {_vm.categ=$$v},expression:\"categ\"}}),_c('v-text-field',{attrs:{\"label\":\"Дата в формате мм.дд.гггг\",\"required\":\"\",\"type\":\"date\",\"error\":_vm.date.length == 0 && !_vm.valid},model:{value:(_vm.date),callback:function ($$v) {_vm.date=$$v},expression:\"date\"}}),_c('v-file-input',{ref:\"file\",attrs:{\"chips\":\"\",\"counter\":\"\",\"multiple\":\"\",\"show-size\":\"\",\"truncate-length\":\"12\",\"label\":\"Загрузить фотографии\",\"accept\":\"image/*\"},on:{\"change\":_vm.fileChange},model:{value:(_vm.filename),callback:function ($$v) {_vm.filename=$$v},expression:\"filename\"}}),_c('div',{staticClass:\"wrapper-img\"}),_c('v-btn',{attrs:{\"block\":\"\",\"color\":\"success\",\"depressed\":\"\",\"elevation\":\"6\",\"outlined\":\"\",\"plain\":\"\",\"raised\":\"\",\"rounded\":\"\",\"text\":\"\",\"tile\":\"\"},on:{\"click\":_vm.validate}},[_vm._v(\"Опубликовать\")]),_c('br'),_c('v-btn',{attrs:{\"block\":\"\",\"color\":\"red\",\"depressed\":\"\",\"elevation\":\"6\",\"outlined\":\"\",\"mt-4\":\"\",\"plain\":\"\",\"raised\":\"\",\"rounded\":\"\",\"text\":\"\",\"tile\":\"\"},on:{\"click\":_vm.reset}},[_vm._v(\"Сбросить\")])],1),_c('div',{ref:\"htmlHelper\",staticClass:\"htmlHelper\",staticStyle:{\"display\":\"none\"},domProps:{\"innerHTML\":_vm._s(_vm.text)}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container>\r\n    <h2 class=\"main-title\">Добавить новость</h2>\r\n    <v-form lazy-validation ref=\"form\">\r\n      <v-text-field\r\n        v-model=\"title\"\r\n        :error=\"title.length == 0 && !valid\"\r\n        label=\"Заголовок\"\r\n        clearable\r\n        clear-icon=\"mdi-close-circle\"\r\n      ></v-text-field>\r\n\r\n      <vue-editor\r\n        class=\"ta\"\r\n        :error=\"text.length == 0 && !valid\"\r\n        v-model=\"text\"\r\n        :editorToolbar=\"customToolbar\"\r\n      ></vue-editor>\r\n\r\n      <v-autocomplete\r\n        :items=\"categories\"\r\n        outlined\r\n        dense\r\n        :error=\"!categ && !valid\"\r\n        v-model=\"categ\"\r\n        chips\r\n        small-chips\r\n        label=\"Категории\"\r\n        required\r\n        multiple\r\n      >\r\n      </v-autocomplete>\r\n\r\n      <v-text-field\r\n        v-model=\"date\"\r\n        label=\"Дата в формате мм.дд.гггг\"\r\n        required\r\n        type=\"date\"\r\n        :error=\"date.length == 0 && !valid\"\r\n      ></v-text-field>\r\n\r\n      <v-file-input\r\n        ref=\"file\"\r\n        chips\r\n        counter\r\n        v-model=\"filename\"\r\n        v-on:change=\"fileChange\"\r\n        multiple\r\n        show-size\r\n        truncate-length=\"12\"\r\n        label=\"Загрузить фотографии\"\r\n        accept=\"image/*\"\r\n      ></v-file-input>\r\n\r\n      <div class=\"wrapper-img\"></div>\r\n      <v-btn\r\n        block\r\n        color=\"success\"\r\n        depressed\r\n        elevation=\"6\"\r\n        outlined\r\n        plain\r\n        raised\r\n        rounded\r\n        text\r\n        v-on:click=\"validate\"\r\n        tile\r\n        >Опубликовать</v-btn\r\n      >\r\n      <br />\r\n      <v-btn\r\n        block\r\n        color=\"red\"\r\n        depressed\r\n        elevation=\"6\"\r\n        outlined\r\n        mt-4\r\n        plain\r\n        raised\r\n        rounded\r\n        text\r\n        tile\r\n        v-on:click=\"reset\"\r\n        >Сбросить</v-btn\r\n      >\r\n    </v-form>\r\n    <div\r\n      class=\"htmlHelper\"\r\n      style=\"display: none\"\r\n      ref=\"htmlHelper\"\r\n      v-html=\"text\"\r\n    ></div>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { VueEditor } from \"vue2-editor\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      date: new Date(Date.now() - new Date().getTimezoneOffset() * 60000)\r\n        .toISOString()\r\n        .substr(0, 10),\r\n      title: \"\",\r\n      text: \"\",\r\n      mainPhoto: 0,\r\n      categ: null,\r\n      valid: true,\r\n      photos: [],\r\n      filename: null,\r\n      html: this.text,\r\n      customToolbar: [\r\n        [{ header: [false, 1, 2, 3, 4, 5, 6] }],\r\n        [\"bold\", \"italic\", \"underline\", \"strike\"],\r\n        [\r\n          { align: \"\" },\r\n          { align: \"center\" },\r\n          { align: \"right\" },\r\n          { align: \"justify\" },\r\n        ],\r\n        [\"blockquote\", \"code-block\"],\r\n        [{ list: \"ordered\" }, { list: \"bullet\" }, { list: \"check\" }],\r\n        [{ indent: \"-1\" }, { indent: \"+1\" }],\r\n        [{ color: [] }, { background: [] }],\r\n        [\"link\"],\r\n        [\"clean\"],\r\n      ],\r\n    };\r\n  },\r\n  components: {\r\n    VueEditor,\r\n  },\r\n  methods: {\r\n    reset() {\r\n      (this.date = \"\"),\r\n        (this.title = \"\"),\r\n        (this.text = \"\"),\r\n        (this.categ = null);\r\n      this.valid = true;\r\n      if (this.$refs.file.value) this.$refs.file.reset();\r\n    },\r\n    validate() {\r\n      this.valid = false;\r\n      if (this.date && this.title && this.text && this.categ) {\r\n        let dateRu = this.date.split(\"-\");\r\n        dateRu = `${dateRu[2]}.${dateRu[1]}.${dateRu[0]}`;\r\n        this.$store.commit(\"ADD_NEWS\", {\r\n          id: Date.now(),\r\n          title: this.title,\r\n          text: [this.text, this.$refs.htmlHelper.innerText],\r\n          category: this.categ.sort(),\r\n          date: dateRu,\r\n          photos: this.photos,\r\n          mainPhoto: this.mainPhoto,\r\n        });\r\n        this.$router.push(\"/\");\r\n      }\r\n    },\r\n\r\n    fileChange(e) {\r\n      let wrapper = document.querySelector(\".wrapper-img\");\r\n      wrapper.innerHTML = \"\";\r\n      let img = null;\r\n      e.forEach((elem) => {\r\n        let reader = new FileReader();\r\n        reader.readAsDataURL(elem);\r\n        reader.onload = (fileLoadedEvent) => {\r\n          let srcData = fileLoadedEvent.target.result;\r\n\r\n          this.photos.push(srcData);\r\n          img = document.createElement(\"img\");\r\n          img.src = reader.result;\r\n          wrapper.appendChild(img);\r\n        };\r\n      });\r\n      wrapper.addEventListener(\"click\", (e) => {\r\n        wrapper.childNodes.forEach((e) => e.classList.remove(\"selected-photo\"));\r\n        if (!e.path[0].classList.contains(\"wrapper-img\"))\r\n          e.path[0].classList.add(\"selected-photo\");\r\n        wrapper.childNodes.forEach((el, idx) => {\r\n          if (el.classList.contains(\"selected-photo\")) {\r\n            this.mainPhoto = idx;\r\n          }\r\n        });\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    categories() {\r\n      return this.$store.getters.categories;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.wrapper-img {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 20px;\r\n  margin-top: 20px;\r\n  overflow-x: auto;\r\n  overflow: hidden;\r\n  max-height: 160px;\r\n}\r\n.wrapper-img img {\r\n  cursor: pointer;\r\n  max-width: 140px;\r\n  max-height: 140px;\r\n  margin-right: 20px;\r\n  overflow: hidden;\r\n  position: relative;\r\n  border-radius: 50%;\r\n\r\n  &:last-child {\r\n    margin-right: 0;\r\n  }\r\n}\r\n.selected-photo {\r\n  transition: all 0.6s ease;\r\n  transform: rotate(360deg);\r\n  border: red solid 6px;\r\n}\r\n.ta {\r\n  margin-bottom: 30px;\r\n}\r\n.main-title {\r\n  text-align: center;\r\n  font-size: 3rem;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n@media (max-width: 1000px) {\r\n  .main-title {\r\n    font-size: 2rem;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNews.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNews.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddNews.vue?vue&type=template&id=1c34fdf6&\"\nimport script from \"./AddNews.vue?vue&type=script&lang=js&\"\nexport * from \"./AddNews.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddNews.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VAutocomplete } from 'vuetify/lib/components/VAutocomplete';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VAutocomplete,VBtn,VContainer,VFileInput,VForm,VTextField})\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddNews.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}